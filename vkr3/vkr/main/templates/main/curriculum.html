{% extends "main/base.html" %}
{% load static %}



{% block content %}

<style>
        .nav-pills .nav-link {
            background-color: #e9ecef;
            color: #007bff;
            margin-right: 5px;
            border-radius: 20px;
            transition: all 0.2s;
        }
        .nav-pills .nav-link:hover {
            background-color: #d6d8db;
        }

        .nav-pills .nav-link.active {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        /* –û–±—ã—á–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ */
        /* –í—Å–µ –≤–∫–ª–∞–¥–∫–∏: —á–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç, –±–µ–ª—ã–π —Ñ–æ–Ω */
        .nav-tabs .nav-link {
            color: #000 !important;
            background-color: #fff !important;
            border: 1px solid #dee2e6;
            margin-right: 2px;
        }

        /* –ê–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ */
        .nav-tabs .nav-link.active {
            color: #000 !important;
            background-color: #e9ecef !important;
            border-color: #dee2e6 #dee2e6 #fff;
        }

        /* –•–æ–≤–µ—Ä */
        .nav-tabs .nav-link:hover {
            color: #000 !important;
            background-color: #f8f9fa !important;
        }
</style>

<div class="container mt-4">
    <h2 class="mb-4">üìò –£—á–µ–±–Ω—ã–π –ø–ª–∞–Ω</h2>

    {% if course_semesters %}
        <!-- –í–∫–ª–∞–¥–∫–∏ –∫—É—Ä—Å–æ–≤ -->
        <ul class="nav nav-pills mb-3" id="courseTabs" role="tablist">
            {% for course, semesters in course_semesters.items %}
                <li class="nav-item" role="presentation">
                    <button class="nav-link {% if forloop.first %}active{% endif %}" id="course-{{ course }}-tab"
                            data-bs-toggle="pill" data-bs-target="#course-{{ course }}" type="button" role="tab">
                        {{ course }} –∫—É—Ä—Å
                    </button>
                </li>
            {% endfor %}
        </ul>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∫—É—Ä—Å–æ–≤ -->
        <div class="tab-content" id="courseTabsContent">
            {% for course, semesters in course_semesters.items %}
                <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="course-{{ course }}" role="tabpanel">

                    <!-- –í–∫–ª–∞–¥–∫–∏ —Å–µ–º–µ—Å—Ç—Ä–æ–≤ -->
                    <ul class="nav nav-tabs mb-3" id="semesterTabs-{{ course }}" role="tablist">
                        {% for semester, items in semesters.items %}
                            <li class="nav-item" role="presentation">
                                <button class="nav-link {% if forloop.first %}active{% endif %}" id="course-{{ course }}-sem-{{ semester }}-tab"
                                        data-bs-toggle="tab" data-bs-target="#course-{{ course }}-sem-{{ semester }}" type="button" role="tab">
                                    –°–µ–º–µ—Å—Ç—Ä {{ semester }}
                                </button>
                            </li>
                        {% endfor %}
                    </ul>

                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å–µ–º–µ—Å—Ç—Ä–æ–≤ -->
                    <div class="tab-content">
                        {% for semester, items in semesters.items %}
                            <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="course-{{ course }}-sem-{{ semester }}" role="tabpanel">
                                <div class="row g-3">
                                    {% for entry in items %}
                                        {% with item=entry.item teacher=entry.teacher %}
                                            <div class="col-md-6 col-lg-4">
                                                <div class="card shadow-sm border-0 h-100">
                                                    <div class="card-body">
                                                        <h5 class="card-title">{{ item.subject.name }}</h5>
                                                        <p class="card-text mb-2">
                                                            <strong>–¢–∏–ø –∫–æ–Ω—Ç—Ä–æ–ª—è:</strong> {{ item.control_types|default:"-" }}<br>
                                                            <strong>–†–∞–±–æ—Ç—ã:</strong> {{ item.work_types|default:"-" }}<br>
                                                            <strong>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ:</strong> {{ item.has_laboratory|yesno:"–î–∞,–ù–µ—Ç" }}<br>
                                                            <strong>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:</strong>
                                                            {% if teacher %}
                                                                {{ teacher.get_full_name }}
                                                            {% else %}
                                                                <span class="text-muted">–Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</span>
                                                            {% endif %}
                                                        </p>
                                                        <button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#details-{{ item.id }}">
                                                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                                        </button>
                                                        <div class="collapse mt-2" id="details-{{ item.id }}">
                                                            <div class="card card-body bg-light">
                                                                <p class="mb-0">üìÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É –±—É–¥–µ—Ç –∑–¥–µ—Å—å.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endwith %}
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>

                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-warning">–£—á–µ–±–Ω—ã–π –ø–ª–∞–Ω –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω.</div>
    {% endif %}
</div>
{% endblock %}
